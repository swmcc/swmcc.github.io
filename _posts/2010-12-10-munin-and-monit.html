--- 
type: post
tags: 
- Server
published: true
title: Munin and Monit
layout: post
status: publish
meta: 
  original_post_id: "12"
  _wp_old_slug: "12"
---
<div>
<div>
<div>
<div>

My server has a nasty habit of <a href="../?p=23" target="_blank">rebooting</a> every so often. I know this isn’t down to me – but rather my <a href="http://www.virpus.com/" target="_blank">hosting providers</a>, but for the amount they are charging I can hardly complain. I want to prove it though – so I installed munin and while I was there I was installed monit. <a href="http://munin-monitoring.org/" target="_blank">Munin</a> will let me know how the server is getting on without me writing a load of bash scripts to monitor such things. <a href="http://mmonit.com/monit/" target="_blank">Monit</a> will just let me know if something stops working – not that the server does much at the mo. However it’ll be there when its needed.  At the mo it will email me if apache, mysql or postgres decided to die or if the CPU, disk usage or RAM decide to have a wee party.

This server is stupidly <a href="http://www.centos.org/" target="_blank">Centos</a> due to me being over eager in getting the server <a href="../?p=10" target="_blank">setup</a>. As usual it wasn’t that handy to install – wasn’t that hard either – just a pain to do. I really am going to move to <a href="http://www.debian.org/" target="_blank">debian</a> during the christmas holidays. Below is a paste of my .bash_history – am sure I did a few things that I didn’t need to do – but it might help someone else out. Depending on what server you have (I can’t remember) you will need to get the i386 or x86_64 (if you have a 64bit OS) – I can’t remember what I decided upon so I downloaded both and hoped that yum would know what to do <img src="../wp-includes/images/smilies/icon_wink.gif" alt=";)" />
<blockquote>
<pre>wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.3.6-1.el5.rf.i386.rpm
rpm -Uvh rpmforge-release-0.3.6-1.el5.rf.i386.rpm
rm -f rpmforge-release-0.3.6-1.el5.rf.i386.rpm
wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.3.6-1.el5.rf.x86_64.rpm
rpm -Uvh rpmforge-release-0.3.6-1.el5.rf.x86_64.rpm
rm -f rpmforge-release-0.3.6-1.el5.rf.x86_64.rpm
yum install munin munin-node
chkconfig --levels 235 munin-node on
chkconfig --levels 235 mysqld on
/etc/init.d/mon
vim  /etc/munin/munin.conf
mkdir -p /www/xxxxxxx.com/public_html/xxxx/
vim  /etc/munin/
vim  /etc/munin/munin.conf
chown munin.munin -R /www/xxxxxx.com/public_html/xxxx/
/etc/init.d/munin-node restart
yum install monit
vim /etc/monit.conf
uptime
vim /etc/monit.conf
sudo /etc/init.d/monit start
chmod 0700 /etc/monit.conf
sudo /etc/init.d/monit start
exit</pre>
</blockquote>
</div>
</div>
</div>
</div>
